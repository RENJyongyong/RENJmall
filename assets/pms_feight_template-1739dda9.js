import{_ as N,r as y,c as S,a as t,w as A,b as a,E as q,d as j,o as f,e as V,g as D,f as K,h as L,i as M,j as R}from"./index-9741e164.js";import{E as G,a as O,b as H}from"./el-table-column-ec3606f8.js";import{E as J,a as Q}from"./el-radio-5832fe68.js";import{E as i,a as X}from"./el-select-be570fba.js";import{a as g}from"./index-420bff95.js";import{E as Y}from"./index-88838146.js";import{E as C}from"./index-ff6c3d72.js";let E;const h=()=>{E=Y.service({lock:!0,text:"加载中...",spinner:"wave"})},_=()=>{E&&E.close()},Z=async l=>{h();try{return await g.request({url:"/mall/pms-feight-template/one/"+l,method:"get"})}catch(e){throw e}finally{_()}},$=async l=>{h();try{return await g.request({url:"/mall/pms-feight-template/del/"+l,method:"get"})}catch(e){throw e}finally{_()}},ee=async l=>{h();try{return await g.request({url:"/mall/pms-feight-template/edit",method:"post",data:l})}catch(e){throw e}finally{_()}},te=async l=>{h();try{return await g.request({url:"/mall/pms-feight-template/add",method:"post",data:l})}catch(e){throw e}finally{_()}},le=async l=>{h();try{return await g.request({url:"/mall/pms-feight-template/page",method:"post",data:l})}catch(e){throw e}finally{_()}},I={One:Z,Del:$,Edit:ee,Add:te,Page:le};const ne={data(){return{json:{current:1,size:99},searchText:"",currentPage:1,pageSize:6,total:0,tableData:[],editDialogVisible:!1,editItem:{},selectedRow:null}},computed:{paginatedData(){const l=(this.currentPage-1)*this.pageSize,e=l+this.pageSize;return this.filteredtableData.slice(l,e)},filteredtableData(){return this.searchText?this.tableData.filter(l=>String(l.name).includes(String(this.searchText))):this.tableData}},methods:{openEditDialog(l){this.editItem={...l},this.editDialogVisible=!0},handlePageChange(l){this.currentPage=l},saveEdit(){console.log(this.editItem),C.confirm("确定修改吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const l=this.tableData.findIndex(e=>e.id===this.editItem.id);l!==-1?this.tableData.splice(l,1,this.editItem):this.tableData.push(this.editItem),this.editDialogVisible=!1,i.success("修改成功！"),this.editItem={}}).catch(()=>{i.info("修改取消！")})},fetchData(){I.Page(this.json).then(l=>{this.tableData=l.data.data.page.records||l.data.records,console.log(l),i.success("刷新成功！")}).catch(l=>{i.error("刷新失败，请检查网络！"),console.error("Error fetching data:",l)})},Insert(l){I.Add(l).then(e=>{delete l.isNew,i.success("插入数据成功！")}).catch(e=>{i.error("插入数据失败！"),console.error("保存修改失败:",e)})},Alter(l){I.Edit(l).then(e=>{console.log("修改保存成功:",e.data),i.success("修改数据成功！")}).catch(e=>{i.error("修改数据失败！"),console.error("保存修改失败:",e)})},Del(l){C.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I.Del(l.id).then(e=>{const p=this.tableData.findIndex(x=>x.id===l.id);p!==-1&&this.tableData.splice(p,1),console.log("删除成功:",e.data),i.success("删除成功！")}).catch(e=>{i.error(response.msg),console.error("删除失败:",e)})}).catch(()=>{})},delND(l){C.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=this.tableData.findIndex(p=>p.id===l.id);e!==-1&&this.tableData.splice(e,1),i.success("删除成功！")}).catch(()=>{i.error("删除失败！"),console.log("取消删除 API",l)})},addAPI(){i.success("添加数据ing");const l={chargeType:0,continmeFee:0,continueWeight:0,dest:"",firstFee:0,firstWeight:0,id:0,name:"",isNew:!0};this.tableData.push(l);const e=Math.ceil(this.tableData.length/this.pageSize);this.handlePageChange(e)}},created(){this.fetchData()}},ae={class:"root"},oe={slot:"footer"};function ie(l,e,p,x,o,s){const d=q,r=H,k=y("Position"),u=L,c=j,w=y("EditPen"),P=y("Delete"),v=G,F=X,m=M,T=J,z=Q,B=R,W=O,U=y("CirclePlusFilled");return f(),S("div",ae,[t(d,{modelValue:o.searchText,"onUpdate:modelValue":e[0]||(e[0]=n=>o.searchText=n),placeholder:"请输入搜索关键字",clearable:"",onClear:l.clearSearch,onKeyup:A(l.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),t(v,{data:s.paginatedData,"header-cell-style":{background:"#eef1f6",color:"#606266"},borde:""},{default:a(()=>[t(r,{prop:"id",label:"id"}),t(r,{prop:"name",label:"name"}),t(r,{prop:"chargeType",label:"chargeType（0：按重量；1：按件数）"}),t(r,{prop:"continmeFee",label:"continmeFee"}),t(r,{prop:"continueWeight",label:"continueWeight"}),t(r,{prop:"dest",label:"dest"}),t(r,{prop:"firstFee",label:"firstFee"}),t(r,{prop:"firstWeight",label:"firstWeight"}),t(r,{width:"150rpx",label:"操作"},{default:a(({row:n})=>[n.isNew?(f(),V(c,{key:0,size:"mini",class:"custom-button",type:"success",circle:"",onClick:b=>s.Insert(n)},{default:a(()=>[t(u,null,{default:a(()=>[t(k)]),_:1})]),_:2},1032,["onClick"])):(f(),V(c,{key:1,class:"custom-button",size:"mini",type:"warning",circle:"",onClick:b=>s.Alter(n)},{default:a(()=>[t(u,null,{default:a(()=>[t(k)]),_:1})]),_:2},1032,["onClick"])),t(c,{type:"primary",size:"mini",circle:"",onClick:b=>s.openEditDialog(n)},{default:a(()=>[t(u,null,{default:a(()=>[t(w)]),_:1})]),_:2},1032,["onClick"]),n.isNew?(f(),V(c,{key:2,size:"mini",type:"danger",circle:"",onClick:b=>s.delND(n)},{default:a(()=>[t(u,null,{default:a(()=>[t(P)]),_:1})]),_:2},1032,["onClick"])):(f(),V(c,{key:3,type:"danger",size:"mini",circle:"",onClick:b=>s.Del(n)},{default:a(()=>[t(u,null,{default:a(()=>[t(P)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),t(F,{"current-page":o.currentPage,"page-size":o.pageSize,total:s.filteredtableData.length,onCurrentChange:s.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),t(W,{class:"form",modelValue:o.editDialogVisible,"onUpdate:modelValue":e[10]||(e[10]=n=>o.editDialogVisible=n),onClose:e[11]||(e[11]=n=>o.editDialogVisible=!1)},{default:a(()=>[t(B,null,{default:a(()=>[t(m,{label:"id"},{default:a(()=>[t(d,{modelValue:o.editItem.id,"onUpdate:modelValue":e[1]||(e[1]=n=>o.editItem.id=n),disabled:""},null,8,["modelValue"])]),_:1}),t(m,{label:"name"},{default:a(()=>[t(d,{modelValue:o.editItem.name,"onUpdate:modelValue":e[2]||(e[2]=n=>o.editItem.name=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"chargeType"},{default:a(()=>[t(z,{modelValue:o.editItem.chargeType,"onUpdate:modelValue":e[3]||(e[3]=n=>o.editItem.chargeType=n)},{default:a(()=>[t(T,{label:0},{default:a(()=>[D("0")]),_:1}),t(T,{label:1},{default:a(()=>[D("1")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"continmeFee"},{default:a(()=>[t(d,{modelValue:o.editItem.continmeFee,"onUpdate:modelValue":e[4]||(e[4]=n=>o.editItem.continmeFee=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"continueWeight"},{default:a(()=>[t(d,{modelValue:o.editItem.continueWeight,"onUpdate:modelValue":e[5]||(e[5]=n=>o.editItem.continueWeight=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"dest"},{default:a(()=>[t(d,{modelValue:o.editItem.dest,"onUpdate:modelValue":e[6]||(e[6]=n=>o.editItem.dest=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"firstFee"},{default:a(()=>[t(d,{modelValue:o.editItem.firstFee,"onUpdate:modelValue":e[7]||(e[7]=n=>o.editItem.firstFee=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"firstWeight"},{default:a(()=>[t(d,{modelValue:o.editItem.firstWeight,"onUpdate:modelValue":e[8]||(e[8]=n=>o.editItem.firstWeight=n)},null,8,["modelValue"])]),_:1})]),_:1}),K("div",oe,[t(c,{onClick:e[9]||(e[9]=n=>o.editDialogVisible=!1)},{default:a(()=>[D("取消")]),_:1}),t(c,{type:"primary",onClick:s.saveEdit},{default:a(()=>[D("保存")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),t(c,{type:"primary",circle:"",size:"large",onClick:s.addAPI,style:{"margin-top":"20px","margin-left":"50%"}},{default:a(()=>[t(u,null,{default:a(()=>[t(U)]),_:1})]),_:1},8,["onClick"])])}const fe=N(ne,[["render",ie]]);export{fe as default};
