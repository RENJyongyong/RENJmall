import{_ as A,r as P,c as r,a as e,w as q,b as i,E as G,d as j,o as a,e as k,g as d,f as K,h as L,i as R,j as O}from"./index-9741e164.js";import{E as H,a as J,b as Q}from"./el-table-column-ec3606f8.js";import{E as W,a as X}from"./el-radio-5832fe68.js";import{E as Y}from"./el-input-number-9855c8cc.js";import{E as m,a as Z}from"./el-select-be570fba.js";import{a as y}from"./index-420bff95.js";import{E as $}from"./index-88838146.js";import{E as x}from"./index-ff6c3d72.js";let C;const v=()=>{C=$.service({lock:!0,text:"加载中...",spinner:"wave"})},I=()=>{C&&C.close()},ee=async o=>{v();try{return await y.request({url:"/mall/ums-member-level/one/"+o,method:"get"})}catch(t){throw t}finally{I()}},te=async o=>{v();try{return await y.request({url:"/mall/ums-member-level/del/"+o,method:"get"})}catch(t){throw t}finally{I()}},le=async o=>{v();try{return await y.request({url:"/mall/ums-member-level/edit",method:"post",data:o})}catch(t){throw t}finally{I()}},ie=async o=>{v();try{return await y.request({url:"/mall/ums-member-level/add",method:"post",data:o})}catch(t){throw t}finally{I()}},oe=async o=>{v();try{return await y.request({url:"/mall/ums-member-level/page",method:"post",data:o})}catch(t){throw t}finally{I()}},D={One:ee,Del:te,Edit:le,Add:ie,Page:oe};const ne={data(){return{json:{current:1,size:99},searchText:"",currentPage:1,pageSize:6,total:0,tableData:[],editDialogVisible:!1,editItem:{},selectedRow:null}},computed:{paginatedData(){const o=(this.currentPage-1)*this.pageSize,t=o+this.pageSize;return this.filteredtableData.slice(o,t)},filteredtableData(){return this.searchText&&this.tableData&&this.tableData.length>0?this.tableData.filter(o=>String(o.name).includes(String(this.searchText))):this.tableData||[]}},methods:{openEditDialog(o){this.editItem={...o},this.editDialogVisible=!0},handlePageChange(o){this.currentPage=o},saveEdit(){console.log(this.editItem),x.confirm("确定修改吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const o=this.tableData.findIndex(t=>t.id===this.editItem.id);o!==-1?this.tableData.splice(o,1,this.editItem):this.tableData.push(this.editItem),this.editDialogVisible=!1,m.success("修改成功！"),this.editItem={}}).catch(()=>{m.info("修改取消！")})},fetchData(){D.Page(this.json).then(o=>{this.tableData=o.data.data.page.records||o.data.records,console.log(this.tableData),m.success("刷新成功！")}).catch(o=>{m.error("刷新失败，请检查网络！"),console.error("Error fetching data:",o)})},Insert(o){D.Add(o).then(t=>{delete o.isNew,m.success("插入数据成功！")}).catch(t=>{m.error("插入数据失败！"),console.error("保存修改失败:",t)})},Alter(o){D.Edit(o).then(t=>{console.log("修改保存成功:",t.data),m.success("修改数据成功！")}).catch(t=>{m.error("修改数据失败！"),console.error("保存修改失败:",t)})},Del(o){x.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{D.Del(o.id).then(t=>{const f=this.tableData.findIndex(E=>E.id===o.id);f!==-1&&this.tableData.splice(f,1),console.log("删除成功:",t.data),m.success("删除成功！")}).catch(t=>{m.error(response.msg),console.error("删除失败:",t)})}).catch(()=>{})},delND(o){x.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=this.tableData.findIndex(f=>f.id===o.id);t!==-1&&this.tableData.splice(t,1),m.success("删除成功！")}).catch(()=>{m.error("删除失败！"),console.log("取消删除 API",o)})},addAPI(){m.success("添加数据ing");const o={commentGrowthPoint:0,defaultStatus:0,freeFreightPoint:0,growthPoint:0,id:0,name:"",note:"",priviledgeBirthday:0,priviledgeComment:0,priviledgeFreeFreight:0,priviledgeMemberPrice:0,priviledgePromotion:0,priviledgeSignIn:0,isNew:!0};this.tableData.push(o);const t=Math.ceil(this.tableData.length/this.pageSize);this.handlePageChange(t)}},created(){this.fetchData()}},ae={class:"root"},re={key:0},se={key:1},de={key:2},me={key:0},ue={key:1},pe={key:2},ce={key:0},ge={key:1},_e={key:2},he={key:0},fe={key:1},be={key:2},ye={key:0},ve={key:1},Ie={key:2},Ve={key:0},Pe={key:1},ke={key:2},De={slot:"footer"};function xe(o,t,f,E,n,c){const b=G,s=Q,w=P("Position"),_=L,g=j,B=P("EditPen"),F=P("Delete"),z=H,T=Z,u=R,S=Y,p=W,h=X,U=O,N=J,M=P("CirclePlusFilled");return a(),r("div",ae,[e(b,{modelValue:n.searchText,"onUpdate:modelValue":t[0]||(t[0]=l=>n.searchText=l),placeholder:"请输入搜索关键字",clearable:"",onClear:o.clearSearch,onKeyup:q(o.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),e(z,{data:c.paginatedData,"header-cell-style":{background:"#eef1f6",color:"#606266"},borde:""},{default:i(()=>[e(s,{width:"60rpx",prop:"id",label:"id"}),e(s,{width:"100rpx",prop:"name",label:"会员名"}),e(s,{width:"100rpx",prop:"growthPoint",label:"成长点"}),e(s,{width:"100rpx",prop:"defaultStatus",label:"默认等级"}),e(s,{width:"100rpx",prop:"freeFreightPoint",label:"免运费标准"}),e(s,{width:"100rpx",prop:"commentGrowthPoint",label:"评价成长值"}),e(s,{width:"100rpx",prop:"priviledgeFreeFreight",label:"免邮特权"},{default:i(({row:l})=>[l.priviledgeFreeFreight==0?(a(),r("span",re,"否")):l.priviledgeFreeFreight==null?(a(),r("span",se)):(a(),r("span",de,"是"))]),_:1}),e(s,{width:"100rpx",prop:"priviledgeSignIn",label:"签到特权"},{default:i(({row:l})=>[l.priviledgeSignIn==0?(a(),r("span",me,"否")):l.priviledgeSignIn==null?(a(),r("span",ue)):(a(),r("span",pe,"是"))]),_:1}),e(s,{prop:"priviledgeComment",label:"评论奖励特权"},{default:i(({row:l})=>[l.priviledgeComment==0?(a(),r("span",ce,"否")):l.priviledgeComment==null?(a(),r("span",ge)):(a(),r("span",_e,"是"))]),_:1}),e(s,{prop:"priviledgePromotion",label:"专项活动特权"},{default:i(({row:l})=>[l.priviledgePromotion==0?(a(),r("span",he,"否")):l.priviledgePromotion==null?(a(),r("span",fe)):(a(),r("span",be,"是"))]),_:1}),e(s,{prop:"priviledgeMemberPrice",label:"会员价格特权"},{default:i(({row:l})=>[l.priviledgeMemberPrice==0?(a(),r("span",ye,"否")):l.priviledgeMemberPrice==null?(a(),r("span",ve)):(a(),r("span",Ie,"是"))]),_:1}),e(s,{width:"100rpx",prop:"priviledgeBirthday",label:"生日特权"},{default:i(({row:l})=>[l.priviledgeBirthday==0?(a(),r("span",Ve,"否")):l.priviledgeBirthday==null?(a(),r("span",Pe)):(a(),r("span",ke,"是"))]),_:1}),e(s,{width:"100rpx",prop:"note",label:"备注"}),e(s,{width:"150rpx",label:"操作"},{default:i(({row:l})=>[l.isNew?(a(),k(g,{key:0,size:"mini",class:"custom-button",type:"success",circle:"",onClick:V=>c.Insert(l)},{default:i(()=>[e(_,null,{default:i(()=>[e(w)]),_:1})]),_:2},1032,["onClick"])):(a(),k(g,{key:1,class:"custom-button",size:"mini",type:"warning",circle:"",onClick:V=>c.Alter(l)},{default:i(()=>[e(_,null,{default:i(()=>[e(w)]),_:1})]),_:2},1032,["onClick"])),e(g,{type:"primary",size:"mini",circle:"",onClick:V=>c.openEditDialog(l)},{default:i(()=>[e(_,null,{default:i(()=>[e(B)]),_:1})]),_:2},1032,["onClick"]),l.isNew?(a(),k(g,{key:2,size:"mini",type:"danger",circle:"",onClick:V=>c.delND(l)},{default:i(()=>[e(_,null,{default:i(()=>[e(F)]),_:1})]),_:2},1032,["onClick"])):(a(),k(g,{key:3,type:"danger",size:"mini",circle:"",onClick:V=>c.Del(l)},{default:i(()=>[e(_,null,{default:i(()=>[e(F)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),e(T,{"current-page":n.currentPage,"page-size":n.pageSize,total:c.filteredtableData.length,onCurrentChange:c.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),e(N,{class:"form",modelValue:n.editDialogVisible,"onUpdate:modelValue":t[14]||(t[14]=l=>n.editDialogVisible=l),center:"",onClose:t[15]||(t[15]=l=>n.editDialogVisible=!1)},{default:i(()=>[e(U,null,{default:i(()=>[e(u,{label:"会员名"},{default:i(()=>[e(b,{modelValue:n.editItem.name,"onUpdate:modelValue":t[1]||(t[1]=l=>n.editItem.name=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"成长点"},{default:i(()=>[e(b,{modelValue:n.editItem.growthPoint,"onUpdate:modelValue":t[2]||(t[2]=l=>n.editItem.growthPoint=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"默认等级"},{default:i(()=>[e(S,{modelValue:n.editItem.defaultStatus,"onUpdate:modelValue":t[3]||(t[3]=l=>n.editItem.defaultStatus=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"免运费标准"},{default:i(()=>[e(S,{modelValue:n.editItem.freeFreightPoint,"onUpdate:modelValue":t[4]||(t[4]=l=>n.editItem.freeFreightPoint=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"评价成长值"},{default:i(()=>[e(b,{modelValue:n.editItem.commentGrowthPoint,"onUpdate:modelValue":t[5]||(t[5]=l=>n.editItem.commentGrowthPoint=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"免邮特权"},{default:i(()=>[e(h,{modelValue:n.editItem.priviledgeFreeFreight,"onUpdate:modelValue":t[6]||(t[6]=l=>n.editItem.priviledgeFreeFreight=l)},{default:i(()=>[e(p,{label:1},{default:i(()=>[d("是")]),_:1}),e(p,{label:0},{default:i(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"签到特权"},{default:i(()=>[e(h,{modelValue:n.editItem.priviledgeSignIn,"onUpdate:modelValue":t[7]||(t[7]=l=>n.editItem.priviledgeSignIn=l)},{default:i(()=>[e(p,{label:1},{default:i(()=>[d("是")]),_:1}),e(p,{label:0},{default:i(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"评论奖励特权"},{default:i(()=>[e(h,{modelValue:n.editItem.priviledgeComment,"onUpdate:modelValue":t[8]||(t[8]=l=>n.editItem.priviledgeComment=l)},{default:i(()=>[e(p,{label:1},{default:i(()=>[d("是")]),_:1}),e(p,{label:0},{default:i(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"专项活动特权"},{default:i(()=>[e(h,{modelValue:n.editItem.priviledgePromotion,"onUpdate:modelValue":t[9]||(t[9]=l=>n.editItem.priviledgePromotion=l)},{default:i(()=>[e(p,{label:1},{default:i(()=>[d("是")]),_:1}),e(p,{label:0},{default:i(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"会员价格特权"},{default:i(()=>[e(h,{modelValue:n.editItem.priviledgeMemberPrice,"onUpdate:modelValue":t[10]||(t[10]=l=>n.editItem.priviledgeMemberPrice=l)},{default:i(()=>[e(p,{label:1},{default:i(()=>[d("是")]),_:1}),e(p,{label:0},{default:i(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"生日特权"},{default:i(()=>[e(h,{modelValue:n.editItem.priviledgeBirthday,"onUpdate:modelValue":t[11]||(t[11]=l=>n.editItem.priviledgeBirthday=l)},{default:i(()=>[e(p,{label:1},{default:i(()=>[d("是")]),_:1}),e(p,{label:0},{default:i(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"备注"},{default:i(()=>[e(b,{modelValue:n.editItem.note,"onUpdate:modelValue":t[12]||(t[12]=l=>n.editItem.note=l)},null,8,["modelValue"])]),_:1})]),_:1}),K("div",De,[e(g,{onClick:t[13]||(t[13]=l=>n.editDialogVisible=!1)},{default:i(()=>[d("取消")]),_:1}),e(g,{type:"primary",onClick:c.saveEdit},{default:i(()=>[d("保存")]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),e(g,{type:"primary",circle:"",size:"large",onClick:c.addAPI,style:{"margin-top":"20px","margin-left":"50%"}},{default:i(()=>[e(_,null,{default:i(()=>[e(M)]),_:1})]),_:1},8,["onClick"])])}const Ue=A(ne,[["render",xe]]);export{Ue as default};
